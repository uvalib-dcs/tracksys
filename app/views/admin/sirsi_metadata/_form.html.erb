<%= semantic_form_for([:admin, @sirsi_metadata], :url=>"/admin/sirsi_metadata/#{@sirsi_metadata.id}") do |f| %>

<fieldset class="three-column panel">
   <legend><span>Basic Information</span></legend>
  <%= render :partial=>'sirsi_meta', locals: {edit: true} %>
</fieldset>

  <fieldset class="three-column panel">
     <legend><span>Detailed Information</span></legend>
    <%= render :partial=>'sirsi_detail', locals: {edit: true}  %>
  </fieldset>

  <%= f.inputs "Administrative Information", :class => 'three-column panel meta-admin-info' do %>
    <%= f.input :is_approved, :as => :radio, label: "Approved?" %>
    <%= f.input :is_personal_item, :as => :radio, label: "Personal item?" %>
    <%= f.input :is_manuscript, :as => :radio, label: "Manuscript or unpublished item?"%>
    <%= f.input :resource_type, :as => :select, :collection => ResourceType.all.order(name: :asc), :input_html => {:class => 'chosen-select',  :style => 'width: 200px'} %>
    <%= f.input :genre, :as => :select, :collection => Genre.all.order(name: :asc), :input_html => {:class => 'chosen-select',  :style => 'width: 200px'} %>
    <%= f.input :ocr_hint, :input_html => {:class => 'chosen-select',  :style => 'width: 200px'} %>
    <%= f.input :ocr_language_hint, :as => :select, :collection => @languages, :input_html => {:class => 'chosen-select',  :style => 'width: 200px'} %>
  <% end %>

  <%= f.inputs "Digital Library Information", :class => 'columns-none panel', :style=>"margin-top:15px" do %>
      <%= f.input :pid, :as => :string, :input_html => { :readonly => true } %>
      <%= f.input :exemplar, :as => :select, :collection => f.object.dl_master_files.map(&:filename), :input_html => {:class => 'chosen-select',  :style => 'width: 250px'} %>
      <%= f.input :availability_policy %>
      <%= f.input :discoverability, :as => :select %>
      <%= f.input :use_right, label: "Right Statement" %>
      <li class="select input optional" id="sirsi_metadata_collection_facet_input">
         <label for="sirsi_metadata_collection_facet" class="label">Collection Facet</label>
         <select name="sirsi_metadata[collection_facet]" id="sirsi_metadata_collection_facet" >
            <option value="" disabled selected>Select a facet</option>
            <option value="">None</option>
            <% CollectionFacet.all.order(name: :asc).each do |c| %>
               <% selected = ""
                  selected = "selected='selected'" if c.name == @sirsi_metadata.collection_facet %>
               <option value="<%= c.name %>" <%= selected %> ><%= c.name %></option>
            <% end %>
         </select>
      </li>

      <%= f.input :dpla, :as => :radio %>

      <!-- Only allow single level heirarchy; if metadata has children, it can't also be a child -->
      <% if @sirsi_metadata.children.count == 0 %>
         <li class="select input optional" id="sirsi_metadata_parent_metadata_id_input">
            <label for="sirsi_metadata_parent_metadata_id" class="label">Parent Metadata ID</label>
            <input id="sirsi_metadata_parent_metadata_id" type="text" name="sirsi_metadata[parent_metadata_id]">
            <span id="find-metadata"></span>
         </li>
      <% end %>

      <%= f.input :date_dl_ingest, :as => :string, :input_html => {:class => "datepicker"} %>
      <%= f.input :date_dl_update, :as => :string, :input_html => {:class => "datepicker"} %>
  <% end %>
  <%= render partial: "/admin/common/metadata_finder_modal" %>

  <fieldset class="columns-none xml-submit">
     <input type="submit" name="commit" value="Update Sirsi metadata">
     <a class="cancel" href="/admin/sirsi_metadata/<%= @sirsi_metadata.id %>">Cancel</a>
  </fieldset>
<% end %>
