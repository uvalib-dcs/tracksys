<%= semantic_form_for([:admin, @unit], :url => "/admin/units/#{@unit.id}") do |f| %>
   <%= f.inputs "General Information", :class => 'panel three-column ' do %>
      <%= f.input :unit_status, :as => :select, :collection => Unit::UNIT_STATUSES %>
      <%= f.input :unit_extent_estimated  %>
      <%= f.input :unit_extent_actual %>
      <%= f.input :special_instructions, :as => :text, :input_html => { :rows => 5 } %>
      <%= f.input :staff_notes, :as => :text, :input_html => { :rows => 5 } %>
      <%= f.input :complete_scan, :as => :radio %>
   <% end %>

   <%= f.inputs "Patron Request", :class => 'panel three-column' do %>
      <%= f.input :intended_use, :as => :select, :collection => IntendedUse.all %>
      <%= f.input :remove_watermark, :as => :radio %>
      <%= f.input :date_materials_received, :as => :string, :input_html => {:class => :datepicker} %>
      <%= f.input :date_materials_returned, :as => :string, :input_html => {:class => :datepicker} %>
      <%= f.input :date_archived, :as => :string, :input_html => {:class => :datepicker} %>
      <%= f.input :date_patron_deliverables_ready, :as => :string, :input_html => {:class => :datepicker} %>
      <%= f.input :patron_source_url,  :as => :text, :input_html => { :rows => 1 } %>
   <% end %>

   <%= f.inputs "Related Information", :class => 'panel three-column' do %>
      <%= f.input :order, :label=> "Order #", :as => :select,
         :collection => Hash[Order.all.map{|o| ["#{o.id}", o.id]}],
         :input_html => { :class => 'chosen-select',:style => 'width: 260px'} %>

      <li class="string input optional stringish">
         <label for="metadata-type-picker" class="label">Metadata Type</label>
         <select id="metadata-type-picker" class="chosen-select" style="width: 260px">
            <option value="sirsi_metadata">SirsiMetadata</option>
            <option value="xml_metadata"<% if !@unit.metadata.nil? && @unit.metadata.type == "XmlMetadata" %>selected<% end %> >XmlMetadata</option>
         </select>
      </li>

      <% if !@unit.metadata.nil? && @unit.metadata.type == "XmlMetadata" %>
         <%= f.input :metadata, :as => :select,
            :collection => Hash[XmlMetadata.all.map{|b| ["#{b.id}: #{b.title}", b.id]}],
            :input_html => { :class => 'chosen-select', :style => 'width: 260px'} %>
      <% else %>
         <%= f.input :metadata, :as => :select,
            :collection => Hash[SirsiMetadata.all.map{|b| ["#{b.barcode}", b.id]}],
            :input_html => { :class => 'chosen-select', :style => 'width: 260px'} %>
      <% end %>

   <% end %>

   <%= f.inputs "Digital Library Information", :class => 'columns-none panel', :style=>"margin-top:15px" do %>
      <%= f.input :include_in_dl, :as => :radio %>
      <%= f.input :date_queued_for_ingest, :as => :string, :input_html => {:class => :datepicker} %>
      <%= f.input :date_dl_deliverables_ready, :as => :string, :input_html => {:class => :datepicker} %>
   <% end %>

   <fieldset class="columns-none xml-submit">
      <input type="submit" name="commit" value="Update">
      <a class="cancel" href="/admin/units/<%= @unit.id %>">Cancel</a>
   </fieldset>
<% end %>
